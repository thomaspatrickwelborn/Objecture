var e={default:(e,t)=>void 0===t?e:e[t],get:(e,t)=>void 0===t?e:e.get(t)};function t(e,t=":scope"){if(Array.isArray(e)||void 0===e)return e;const n=[];for(const[s,r]of Object.entries(e)){const e=s.trim().split(" ");let i,o,a,c;1===e.length?(i=t,o=e[0]):e.length>1&&(i=e[0],o=e[1]),Array.isArray(r)?(a=r[0],c=r[1]):a=r;const p={type:o,path:i,listener:a,enable:!1};n.push(p)}return n}const n=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase();function s(e){let t;const s=n(e);return"object"===s?t={}:"array"===s?t=[]:"string"===s?"object"===e?t={}:"array"===e&&(t=[]):t=void 0,t}const r={depth:0,maxDepth:10,accessors:[e.default]};function i(e,t){const n=[],s=Object.assign({},r,t);if(s.depth++,s.depth>s.maxDepth)return n;for(const t of s.accessors){const r=t(e);if(r)for(const[e,t]of Object.entries(r))if(n.push(e),"object"==typeof t&&null!==t&&t!==r){const r=i(t,s);for(const t of r){let s;s="object"==typeof t?[e,...t].join("."):[e,t].join("."),n.push(s)}}}return n}function o(e,...t){if(!e)return e;for(const s of t)if(s)for(const[t,r]of Object.entries(s)){const s=n(e[t]),i=n(r);e[t]="object"===s&&"object"===i?o(e[t],r):r}return e}const a={string:String,number:Number,boolean:Boolean,bigint:BigInt,undefined:void 0,null:null},c=Object.keys(a),p=Object.values(a),g={object:Object,array:Array},l=Object.keys(g),u=Object.values(g),h=Object.assign({},a,g),f=Object.keys(h),d=Object.values(h),b=[a.String,a.Number,a.Boolean,g.Object,g.Array];var y=Object.freeze({__proto__:null,ObjectKeys:l,ObjectValues:u,Objects:g,PrimitiveKeys:c,PrimitiveValues:p,Primitives:a,TypeKeys:f,TypeMethods:b,TypeValues:d,Types:h}),v=Object.freeze({__proto__:null,accessors:e,expandEvents:t,impandEvents:function(e){if(!Array.isArray(e))return e;const t={};for(const n of e){const{path:e,type:s,listener:r,options:i}=n,o=`${$path} ${$type}`;t[o]=void 0!==i?[r,i]:r}return t},isPropertyDefinition:function(e){return!!(Object.getOwnPropertyDescriptor(e,"type")&&(d.includes(e.type)||f.includes(e.type))||"object"==typeof e.type&&Object.getOwnPropertyDescriptor(e.type,"value")&&(d.includes(e.type.value)||f.includes(e.type.value)))},objectClone:function e(t){const n=s(t);for(const[s,r]of Object.entries(t))n[s]="object"==typeof r?e(r):r;return n},propertyDirectory:i,recursiveAssign:o,recursiveAssignConcat:function e(t,...s){if(!t)return t;for(const r of s)if(r)for(const[s,i]of Object.entries(r)){const r=n(t[s]),o=n(i);t[s]="object"===r&&"object"===o?e(t[s],i):"array"===r&&"array"===o?t[s].concat(i):i}return t},recursiveFreeze:function e(t){for(const[n,s]of Object.entries(t))s&&"object"==typeof s&&e(s);return Object.freeze(t)},regularExpressions:{quotationEscape:/\.(?=(?:[^"]*"[^"]*")*[^"]*$)/},typeOf:n,typedObjectLiteral:s,variables:y});function m(e){if(e.length<3)return"{"+e+"}";for(var t=-1,n=2;n<e.length;n++)if("."===e[n]&&"."===e[n-1]&&(n<2||"\\"!==e[n-2])){if(t>-1)return"{"+e+"}";t=n-1}if(t>-1){var s=e.substr(0,t),r=e.substr(t+2);if(s.length>0&&r.length>0)return"["+e.substr(0,t)+"-"+e.substr(t+2)+"]"}return"{"+e+"}"}function j(e){if("string"!=typeof e)throw new TypeError("A pattern must be a string, but "+typeof e+" given");for(var t,n=!1,s=0,r=0,i=-1,o=[""],a=[],c=0;c<e.length;c++){var p=e[c];if("\\"!==p){if("{"===p)if(n)s++;else if(c>i&&!s){t=e.substring(i+1,c);for(var g=0;g<o.length;g++)o[g]+=t;a=[],i=c,n=!0,s++}else s--;else if("}"===p)if(n)r++;else if(1===r){if(t=e.substring(i+1,c),a.length>0){var l=[];a.push(j(t));for(g=0;g<o.length;g++)for(var u=0;u<a.length;u++)for(var h=0;h<a[u].length;h++)l.push(o[g]+a[u][h]);o=l}else{t=m(t);for(g=0;g<o.length;g++)o[g]+=t}i=c,r--}else r--;else n||","!==p||r-s!=1||(t=e.substring(i+1,c),a.push(j(t)),i=c);!n||r!==s&&c!==e.length-1||(n=!1,c=i-1)}else c++}if(-1===i)return[e];var f="{"===e[i]?i:i+1;if(f<e.length){t=e.substr(f);for(g=0;g<o.length;g++)o[g]+=t}return o}function E(e,t){var n,s=!1!==t["!"],r=!1!==t["()"],i=!1;if(s){for(n=0;n<e.length&&"!"===e[n];n++){if(r&&"("===e[n+1]){n--;break}i=!i}n>0&&(e=e.substr(n))}return{pattern:e,isNegated:i}}function O(e){return"-"===e||"^"===e||"$"===e||"+"===e||"."===e||"("===e||")"===e||"|"===e||"["===e||"]"===e||"{"===e||"}"===e||"*"===e||"?"===e||"\\"===e?"\\"+e:e}function D(e,t,n){var s=void 0===t.separator||t.separator,r="",i="",o=".";!0===s?(r="/",i="[/\\\\]",o="[^/\\\\]"):o=s?(i=function(e){for(var t="",n=0;n<e.length;n++)t+=O(e[n]);return t}(r=s)).length>1?"((?!"+(i="(?:"+i+")")+").)":"[^"+i+"]":".";var a=s?i+"+?":"",c=s?i+"*?":"",p=s?e.split(r):[e];return{source:e,segments:p,options:t,separator:s,separatorSplitter:r,separatorMatcher:i,optionalSeparator:c,requiredSeparator:a,wildcard:o,support:{qMark:!1!==t["?"],star:!1!==t["*"],globstar:s&&!1!==t["**"],brackets:!1!==t["[]"],extglobs:!1!==t["()"],excludeDot:n&&!1!==t.excludeDot}}}function k(e,t,n,s){return{source:e,isFirst:n,isLast:s,end:e.length-1}}var w="(?!\\.)";function x(e,t,n){return e.addToUnmatch&&(e.result.unmatch+=t),e.addToMatch&&(n&&!e.dotHandled&&(t=w+t),e.dotHandled=!0,e.result.match+=t),e.result}function P(e,t,n){var s=e.support,r=function(e,t,n){return{pattern:e,segment:t,result:n,openingBracket:t.end+1,closingBracket:-1,openingParens:0,closingParens:0,parensHandledUntil:-1,extglobModifiers:[],scanningForParens:!1,escapeChar:!1,addToMatch:!0,addToUnmatch:e.support.extglobs,dotHandled:!1,i:-1,char:"",nextChar:""}}(e,t,n),i=t.isLast?e.optionalSeparator:e.requiredSeparator;if(s.excludeDot||(r.dotHandled=!0),-1===t.end)return t.isLast&&!t.isFirst?n:x(r,i);if(s.globstar&&"**"===t.source)return x(r,"(?:"+((r.dotHandled?"":w)+e.wildcard+"*?"+i)+")*?");for(;++r.i<=t.end;){if(r.char=r.segment.source[r.i],r.nextChar=r.i<t.end?t.source[r.i+1]:"","\\"===r.char){if(r.i<r.segment.end){r.escapeChar=!0;continue}r.char=""}e=r.pattern,t=r.segment;var o=r.char,a=r.i;if(e.support.brackets&&!r.scanningForParens){if(a>r.openingBracket&&a<=r.closingBracket){r.escapeChar?x(r,O(o)):a===r.closingBracket?(x(r,"]"),r.openingBracket=t.source.length):"-"===o&&a===r.closingBracket-1?x(r,"\\-"):"!"===o&&a===r.openingBracket+1?x(r,"^"):x(r,"]"===o?"\\]":o),r.escapeChar=!1;continue}if(a>r.openingBracket){"]"===o&&!r.escapeChar&&a>r.openingBracket+1&&a>r.closingBracket?(r.closingBracket=a,r.i=r.openingBracket,e.separator?x(r,"(?!"+e.separatorMatcher+")[",!0):x(r,"[",!0)):a===t.end&&(x(r,"\\["),r.i=r.openingBracket,r.openingBracket=t.source.length,r.closingBracket=t.source.length),r.escapeChar=!1;continue}if("["===o&&!r.escapeChar&&a>r.closingBracket&&a<t.end){r.openingBracket=a,r.escapeChar=!1;continue}}if(r.pattern.support.extglobs){var c=r.extglobModifiers,p=(o=r.char,r.nextChar);a=r.i;if("("!==p||r.escapeChar||"@"!==o&&"?"!==o&&"*"!==o&&"+"!==o&&"!"!==o){if(")"!==o||r.escapeChar){if("|"===o&&r.closingParens&&!r.scanningForParens&&!r.escapeChar){x(r,"|");continue}}else if(r.scanningForParens)r.closingParens++;else if(c.length){var g=c.pop();if("!"===g&&-1!==c.indexOf("!"))throw new Error("Nested negated extglobs aren't supported");x(r,")"+(g="!"===g||"@"===g?"":g)),r.addToMatch=!0,r.addToUnmatch=!0,r.closingParens--;continue}}else if(r.scanningForParens)r.openingParens++;else if(a>r.parensHandledUntil&&!r.closingParens)r.parensHandledUntil=a,r.scanningForParens=!0,r.openingParens++;else{if(r.closingParens>=r.openingParens){"!"===o&&(r.addToMatch=!0,r.addToUnmatch=!1,x(r,r.pattern.wildcard+"*?",!0),r.addToMatch=!1,r.addToUnmatch=!0,r.result.useUnmatch=!0),c.push(o),x(r,"(?:",!0),r.openingParens--,r.i++;continue}r.openingParens--}if(r.scanningForParens){r.closingParens!==r.openingParens&&a!==r.segment.end||(r.scanningForParens=!1,r.i=r.parensHandledUntil-1),r.escapeChar=!1;continue}}s=(e=r.pattern).support;!r.escapeChar&&s.star&&"*"===r.char?r.i!==r.segment.end&&"*"===r.nextChar||x(r,e.wildcard+"*?",!0):!r.escapeChar&&s.qMark&&"?"===r.char?x(r,e.wildcard,!0):x(r,O(r.char)),r.escapeChar=!1}return x(r,i)}function C(e,t,n){for(var s=D(e,t,n),r={match:"",unmatch:"",useUnmatch:!1},i=s.segments,o=0;o<i.length;o++){P(s,k(i[o],0,0===o,o===i.length-1),r)}return r.useUnmatch?"(?!^"+r.unmatch+"$)"+r.match:r.match}function _(e,t){if("string"!=typeof t)throw new TypeError("Sample must be a string, but "+typeof t+" given");return e.test(t)}function B(e,t){if("string"!=typeof e&&!Array.isArray(e))throw new TypeError("The first argument must be a single pattern string or an array of patterns, but "+typeof e+" given");if("string"!=typeof t&&"boolean"!=typeof t||(t={separator:t}),2===arguments.length&&void 0!==t&&("object"!=typeof t||null===t||Array.isArray(t)))throw new TypeError("The second argument must be an options object or a string/boolean separator, but "+typeof t+" given");if("\\"===(t=t||{}).separator)throw new Error("\\ is not a valid separator");var n=function(e,t){e=Array.isArray(e)?e:[e],!1!==t["{}"]&&(e=function(e,t){for(var n=[],s=0;s<e.length;s++)for(var r=t(e[s]),i=0;i<r.length;i++)n.push(r[i]);return n}(e,j));for(var n=[],s=[],r="",i=0;i<e.length;i++){var o=E(e[i],t),a=C(o.pattern,t,!o.isNegated);o.isNegated?s.push(a):n.push(a)}return s.length&&(r="(?!(?:"+s.join("|")+")$)"),n.length>1?r+="(?:"+n.join("|")+")":1===n.length?r+=n[0]:r.length&&(r+=C("**",t,!0)),"^"+r+"$"}(e,t),s=new RegExp(n,t.flags),r=_.bind(null,s);return r.options=t,r.pattern=e,r.regexp=s,r}class T{#e;#t;#n;#s=!1;#r;#i=[];#o=[];#a=[];#c=[];#p=[];#g;#l;#u;constructor(t,n){if(!t||!n)return this;this.#e=((t={})=>{const n={enable:!1,accessors:[e.default],propertyDirectory:{scopeKey:t.scopeKey,maxDepth:10},assign:"addEventListener",deassign:"removeEventListener",transsign:"dispatchEvent",bindListener:!0,scopeKey:":scope",errorLog:!1,methods:{assign:{addEventListener:function(e,t){const{type:n,listener:s,settings:r}=e,{options:i,useCapture:o}=r;return t.addEventListener(n,s,i||o)},on:function(e,t){const{type:n,listener:s}=e;return t.on(n,s)},once:function(e,t){const{type:n,listener:s}=e;return t.once(n,s)}},deassign:{removeEventListener:function(e,t){const{type:n,listener:s,settings:r}=e,{options:i,useCapture:o}=r;return t.removeEventListener(n,s,i||o)},off:function(e,t){const{type:n,listener:s}=e;return t.off(n,s)}},transsign:{dispatchEvent:function(e,t,n){return t.dispatchEvent(n)},emit:function(e,t,n,...s){return t.emit(n,...s)}}}};for(const[e,s]of Object.entries(t))switch(e){case"propertyDirectory":n[e]=Object.assign(n[e],s);break;case"accessors":n[e]=s,n.propertyDirectory[e]=s;break;case"methods":n[e]=o(n[e],s);break;case"enableEvents":break;default:n[e]=s}return n})(t),this.#t=n,this.enable=this.settings.enable}get settings(){return this.#e}get path(){return this.settings.path}get type(){return this.settings.type}get listener(){if(void 0!==this.#n)return this.#n;const e=this.settings.listener;return!0===this.settings.bindListener?this.#n=e.bind(this.#t):this.#n=e,this.#n}get enable(){return this.#s}set enable(e){const t=this.#h,n=this.#i,s=this.#o;n.length=0,s.length=0;for(const r of t){const{path:t,target:i,enable:o}=r;this.settings;if(o!==e)if(!0===e)try{this.#f(i),r.enable=e,n.push(r)}catch(e){this.settings.errorLog&&console.error(e)}else if(!1===e)try{this.#d(i),r.enable=e,s.push(r)}catch(e){this.settings.errorLog&&console.error(e)}}this.#s=e}get assigned(){return this.#i}get deassigned(){return this.#o}get#b(){return this.settings.target}get#h(){const e=this.#p,t=[];if(this.#b)for(const n of[].concat(this.#b)){const s=e.find((e=>e?.path===this.path));void 0!==s?t.push(s):void 0===s&&t.push({path:this.path,target:n,enable:!1})}else if("string"===n(this.path)){const n=[];if(this.path===this.#y){const e={path:this.path,target:this.#t,enable:!1};t.push(e)}else{if(this.settings.propertyDirectory){const e=this.#v,t=B(this.path,{separator:"."});for(const s of e){!0===t(s)&&n.push(s)}"*"===this.path.charAt(0)&&n.unshift(this.#y)}else n.push(this.path);for(const s of n){const n=e.find((e=>e.path===s));let r,i=this.#t;const o=s.split(".");let a=0;e:for(;a<o.length;){let e=o[a];if(e===this.#y)break e;t:for(const t of this.settings.accessors){try{i=t(i,e)}catch(e){this.settings.errorLog&&console.error(e)}if(void 0!==i)break t}a++}void 0!==i&&(i===n?.target?r=n:"object"==typeof i&&(r={path:s,target:i,enable:!1})),void 0!==r&&t.push(r)}}}return this.#p=t,this.#p}get#y(){return this.settings.scopeKey}get#f(){return void 0!==this.#g||(this.#g=this.settings.methods.assign[this.settings.assign].bind(null,this)),this.#g}get#d(){return void 0!==this.#l||(this.#l=this.settings.methods.deassign[this.settings.deassign].bind(null,this)),this.#l}get#m(){return void 0!==this.#u||(this.#u=this.settings.methods.transsign[this.settings.transsign].bind(null,this)),this.#u}get#j(){return this.settings.methods}get#v(){if(!this.settings.propertyDirectory)return null;const e=(this.settings.accessors,this.settings.propertyDirectory);return i(this.#t,e)}emit(){const e=this.#h,t=this.#a,n=this.#c;t.length=0,n.length=0;for(const s of e){const{target:e}=s;try{this.#m(e,...arguments),t.push(s)}catch(e){n.push(s)}}return this}}class A extends EventTarget{static implement=function(e,n){if(!e||!n)return;const s=((e={})=>{const t={events:{},enableEvents:!1,propertyDefinitions:{getEvents:"getEvents",addEvents:"addEvents",removeEvents:"removeEvents",enableEvents:"enableEvents",disableEvents:"disableEvents",reenableEvents:"reenableEvents",emitEvents:"emitEvents"}};for(const[n,s]of Object.entries(e))t[n]="propertyDefinitions"===n?Object.assign(t[n],s):s;return t})(n),r=[];return Object.defineProperties(e,{[s.propertyDefinitions.getEvents]:{enumerable:!1,writable:!1,value:function(){if(!arguments[0])return r;const e=[],t=[].concat(arguments[0]);for(const n of t)for(const t of r){let s;e:for(const[e,r]of Object.entries(n)){let n;if(n="listener"===e?t.settings[e]===r:t[e]===r,!1===s)break e;s=n}!0===s&&e.push(t)}return e}},[s.propertyDefinitions.addEvents]:{enumerable:!1,writable:!1,value:function(){if(!arguments.length)return e;let n=t(arguments[0],s.scopeKey);for(let t of n){const n={};for(const e of["accessors","assign","deassign","transsign","propertyDirectory"]){const t=s[e];void 0!==t&&(n[e]=t)}o(n,t);const i=new T(n,e);r.push(i)}return e}},[s.propertyDefinitions.removeEvents]:{enumerable:!1,writable:!1,value:function(){const t=e[s.propertyDefinitions.getEvents](arguments[0]);if(0===t.length)return e;let n=r.length-1;for(;n>-1;){const e=r[n];t.includes(e)&&(e.enable=!1,r.splice(n,1)),n--}return e}},[s.propertyDefinitions.enableEvents]:{enumerable:!1,writable:!1,value:function(){const t=e[s.propertyDefinitions.getEvents](arguments[0]);if(0===t.length)return e;for(const e of t)e.enable=!0;return e}},[s.propertyDefinitions.disableEvents]:{enumerable:!1,writable:!1,value:function(){const t=e[s.propertyDefinitions.getEvents](arguments[0]);if(0===t.length)return e;for(const e of t)e.enable=!1;return e}},[s.propertyDefinitions.reenableEvents]:{enumerable:!1,writable:!1,value:function(){const t=e[s.propertyDefinitions.getEvents](arguments[0]);for(const e of t)e.enable=!1,e.enable=!0;return e}},[s.propertyDefinitions.emitEvents]:{enumerable:!1,writable:!1,value:function(t,...n){const r=e[s.propertyDefinitions.getEvents](t);for(const e of r)e.emit(...n);return e}}}),s.events&&e[s.propertyDefinitions.addEvents](s.events),!0===s.enableEvents&&e[s.propertyDefinitions.enableEvents](),e};constructor(e={}){return super(),A.implement(this,e)}}export{A as Core,v as Coutil};
//# sourceMappingURL=core-plex.min.js.map
